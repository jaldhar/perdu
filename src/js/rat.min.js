Rat=function(a){this.a=a};Rat.prototype={path:function(a,b){return new Rat.e(a,b,this)},text:function(a,b){return new Rat.Text(a,b,this)},clear:function(){var a=this.a.canvas;this.a.clearRect(0,0,a.width,a.height)},b:function(a){var b=this.a;a.forEach(function(a){a.b(b)})}};Rat.e=function(a,b,c){Rat.d(this,arguments)};Rat.e.prototype={b:function(){d(this,function(a){this.style.fillStyle&&a.fill();this.style.strokeStyle&&a.stroke()})}};
function d(a,b){var c=a.a.a;Rat.style(c,a.style);c.beginPath();a.c.forEach(function(a){c[a[0]].apply(c,a.slice(1))});b.call(a,c);c.restore()}Rat.Image=function(a,b,c){Rat.d(this,arguments)};Rat.Image.prototype.b=function(a){Rat.style(a,this.style);this.style.f?a.drawImage.apply(a,[this.c,0,0].concat(this.style.f)):a.drawImage(this.c,0,0);a.restore()};Rat.Text=function(){Rat.d(this,arguments)};
Rat.Text.prototype.b=function(a){Rat.style(a,this.style);this.style.fillStyle&&a.fillText(this.c,0,0,this.style.maxWidth||999999999999999);this.style.strokeStyle&&a.strokeText(this.c,0,0,this.style.maxWidth||1E16);a.restore()};Rat.g="translate0rotate0transform0scale".split(0);
Rat.style=function(a,b){a.save();b.origin&&a.translate.apply(a,b.origin);b.rotate&&a.rotate(b.rotate);b.scale&&a.scale.apply(a,b.scale);b.origin&&a.translate(-b.origin[0],-b.origin[1]);b.translate&&a.translate.apply(a,b.translate);b.transform&&a.transform.apply(a,b.transform);Object.keys(b).forEach(function(c){~Rat.g.indexOf(c)||(a[c]=b[c])})};Rat.d=function(a,b){a.c=b[0];a.style=b[1]||{};a.a=b[2];a.b(b[2].a)};
